\chapter{Documentos y esquemáticos del hardware}

\section{Herramientas de diseño}
Las herramientas CAD utilizadas para el diseño del hardware son Kicad \cite{KiCad} y gEDA \cite{gEDA}, ambas son de uso libre y open source.
Para el caso del lector/escritor RFID se empleó la aplicación gEDA, ya que permite generar 
pistas con forma de arco de circunferencia, elemento necesario para formar el inductor de la antena. 
El resto del hardware se diseñó en Kicad, dado que tiene una interfaz gráfica más amigable que gEDA lo que la hace más sencilla de usar.
Ambas aplicaciones tienen la ventaja de permitir agregar y editar componentes
o módulos diseñados por el mismo usuario y permiten generar archivos en formato
gerber necesarios para enviar al fabricante de circuitos impresos.


\section{Esquemáticos y componentes}

En lo que sigue se muestran una serie de cuadros y esquemáticos para lograr un 
mayor detalle del diseño de las distintas partes que conforman el hardware
del prototipo $RF^{2}$.
En el cuadro \ref{c_VLT} se observa la distribución de pines asociada con el conector
que une la SBC (Beagleboard), con el conversor de niveles de tensión, VLT.
Por su parte el cuadro \ref{c_SCUI} muestra el orden de los pines en el conector que 
interconecta la placa de circuito impreso, VLT, con la placa de circuito
impreso, SCUI, que contiene el resto del hardware. 


\begin{longtable}{|l|c|c|c|c|r|}
\hline
\multicolumn{1}{|c|}{\textbf{Función}} & \textbf{Nombre} & \textbf{Nº de pin} & \textbf{Nº de pin} & \textbf{Nombre} & \multicolumn{1}{c|}{\textbf{Función}} \\ \hline
Fuente 1,8 Volts & 1V8 & 1 & 2 & 5V & Fuente 5 Volts \\ \hline
Led Verde & GPIO & 3 & 4 & GPIO & RST\_SC \\ \hline
Led Rojo & GPIO & 5 & 6 & UART\_TX & UART\_TX \\ \hline
XOE & GPIO & 7 & 8 & UART\_RX & UART\_RX \\ \hline
D7 & GPIO & 9 & 10 & GPIO & Led Amarillo \\ \hline
SPI\_CS & SPI\_CS & 11 & 12 & GPIO & Buzzer \\ \hline
D5 & GPIO & 13 & 14 & GPIO & BacK Light \\ \hline
E & GPIO & 15 & 16 & GPIO & D6 \\ \hline
SPI\_SOMI & SPI\_SOMI & 17 & 18 & GPIO & D4 \\ \hline
SPI\_SIMO & SPI\_SIMO & 19 & 20 & GPIO & RW \\ \hline
SPI\_CLK & SPI\_CLK & 21 & 22 & GPIO & RS \\ \hline
IRQ\_RF & GPIO & 23 & 24 & GPIO & RST\_RF \\ \hline
OE & REGEN & 25 & 26 & nRESET & N.C. \\ \hline
Referencia 0 Volts & GND & 27 & 28 & GND & \multicolumn{1}{l|}{Referencia 0 Volts} \\ \hline
\caption{Conector 14x2 Beagleboard – VLT}\label{c_VLT}
\end{longtable}


\begin{longtable}{|l|c|c|c|c|r|}
\hline
\multicolumn{1}{|c|}{\textbf{Función}} & \textbf{Nombre} & \textbf{Nº de pin} & \textbf{Nº de pin} & \textbf{Nombre} & \multicolumn{1}{c|}{\textbf{Función}} \\ \hline
Referencia 0 Volts & GND & 1 & 2 & N/C & RFU \\ \hline
Fuente 3,3 Volts & 3V3 & 3 & 4 & RST\_RF & Reset RC632 \\ \hline
RFU & N/C & 5 & 6 & SPI\_SOMI & SPI para RC632 \\ \hline
RFU & N/C & 7 & 8 & SPI\_CLK & Reloj SPI \\ \hline
RFU & N/C & 9 & 10 & SPI\_SIMO & SPI para RC632 \\ \hline
RFU & N/C & 11 & 12 & SPI\_CS & Chip Select RC632 \\ \hline
Control LCD16x2 & RS & 13 & 14 & IRQ\_RF & Interrup RC632 \\ \hline
Control LCD16x2 & RW & 15 & 16 & BLK & BacK Light \\ \hline
Control LCD16x2 & E & 17 & 18 & XOE & Reset oscilador \\ \hline
Dato LCD16x2 & D4 & 19 & 20 & BUZZ & Buzzer \\ \hline
Dato LCD16x2 & D5 & 21 & 22 & N/C & RFU \\ \hline
Dato LCD16x2 & D6 & 23 & 24 & N/C & RFU \\ \hline
Dato LCD16x2 & D7 & 25 & 26 & N/C & RFU \\ \hline
RFU & N/C & 27 & 28 & UART\_RX & Smart card \\ \hline
Fuente 5 Volts & 5V & 29 & 30 & UART\_TX & Smart card \\ \hline
Referencia 0 Volts & GND & 31 & 32 & RST\_SC & Reset Smart card \\ \hline
Led Rojo & LED\_R & 33 & 34 & N/C & RFU \\ \hline
Led Amarillo & LED\_A & 35 & 36 & N/C & RFU \\ \hline
Led Verde & LED\_V & 37 & 38 & N/C & RFU \\ \hline
RFU & N/C & 39 & 40 & N/C & RFU \\ \hline
\caption{Conector 20x2 VLT - SCUI}\label{c_SCUI}
\end{longtable}


\subsection{SBC}
\begin{longtable}{|l|l|}
\hline
\multicolumn{1}{|c|}{\textbf{Componente}} & \multicolumn{1}{c|}{\textbf{Descripción}} \\ \hline
SBC & Beagleboard  RevC4 \\ \hline
Memoria SD & 4GB SDHC Class 6 SD Card \\ \hline
Cable serial DB9 nulo & DB9F Null Modem (RS-232) (6-ft) \\ \hline
Cable conversor usb–serial & USB to DB9M RS-232 (PL-2302) \\ \hline
Cable USB & USB Mini-A to USB A Female, OTG \\ \hline
Cable USB & USB Mini-B Male to USB A Male \\ \hline
Fuente  & 5VDC/2,5A \\ \hline
\caption{SBC y lista de accesorios}
\label{}
\end{longtable}

\newpage
\subsection{VLT - Conversor de Voltajes}
\begin{longtable}{|l|l|c|c|}
\hline
\multicolumn{1}{|c|}{\textbf{Componente}} & \multicolumn{1}{c|}{\textbf{Descripción}} & \textbf{ Footprint} & \textbf{Valor} \\ \hline
C1 & Polarized Capacitor (Tantal) & 6032[2312] & 10uF, 25V \\ \hline
C2 & Polarized Capacitor (Tantal) & 6032[2312] & 100uF, 6V3 \\ \hline
U4 & Regulador LM1117-3.3 & SOT-223 & 3.3V, 800mA \\ \hline
U1, U2, U3 & Voltage Level Translator & TSSOP20 & - \\ \hline
P1 & RECEPTACLE, 28WAY, 2ROW & SMD  Pitch 2,54 & 28 pines \\ \hline
P2 & RECEPTACLE, 40WAY, 2ROW & SMD  Pitch 2,54 & 40 pines \\ \hline
P1b & HEADER, 28WAY, 2ROW & T H Pitch 2,54 & 28 pines \\ \hline
P2b & HEADER, 40WAY, 2ROW & T H Pitch 2,54 & 40 pines \\ \hline
\caption{Lista de componentes de la placa de circuito impreso VLT}
\label{}
\end{longtable}

\begin{figure}[H]
\centering
  \begin{center}
  \includegraphics[angle=90]{Imagenes/vlt.jpg}
  \end{center}
  \caption{Esquemático de la placa VLT - Voltage Level Translator}\label{Fig:VLT} 
\end{figure}

\subsection{SCUI - Lector de tarjetas de contacto e Interfaz de Usuario}
\begin{longtable}{|l|l|c|c|}
\hline
\multicolumn{1}{|c|}{\textbf{Componente}} & \multicolumn{1}{c|}{\textbf{Descripción}} & \textbf{ Footprint} & \textbf{Valor} \\ \hline
R9 & Resistor 100W 1/4W 1\%  & 3216[1206] & 100W 1/4W  1\% \\ \hline
R10, R13 & Resistor 100KW 1/4W 5\%  & 3216[1206] & 100KW 1/4W   5\% \\ \hline
R11, R12, R14 & Resistor 10KW 1/4W 5\%  & 3216[1206] & 10KW 1/4W   5\% \\ \hline
Q2 & TRANSISTOR, NPN, 300MHZ & SOT23 & MMBT3904 \\ \hline
Q3 & TRANSISTOR, PNP, 250MHZ & SOT23 & MMBT3906 \\ \hline
J2 & SIM socket (6 contacts) & SMD & - \\ \hline
JP3, JP4 & HEADER, 1ROW, 3WAY & T H Pitch 2,54 & 3 pines \\ \hline
X1 & Oscillator 3.579545MHz & SMD & 3.579545 Mhz \\ \hline
ESD1 & Anti ESD & SOT323 & 6V / 150W \\ \hline
\caption{Lista de componentes del lector de tarjetas de contacto, SC}
\label{}
\end{longtable}

\newpage
%LCD
\begin{longtable}{|l|l|c|c|}
\hline
\multicolumn{1}{|c|}{\textbf{Componente}} & \multicolumn{1}{c|}{\textbf{Descripción}} & \textbf{ Footprint} & \textbf{Valor} \\ \hline
R1 & Resistor 4K7    1/10W     1\% & 1608[0603] & 4,7KW  1/10W   1\% \\ \hline
R2, R8 & Resistor 3R3    1/10W     1\% & 1608[0603] & 3,3W    1/10W   1\% \\ \hline
R3, R4, R5 & Resistor 680R  1/10W     1\% & 1609[0603] & 680W   1/10W   1\% \\ \hline
R6, R7 & Resistor 10K    1/10W     1\% & 1608[0603] & 10KW  1/10W   1\% \\ \hline
RV1 & Preset 15K        1/10W  25\% & SMD & 15KW   1/10W  25\% \\ \hline
Q1 & TRANSISTOR, NPN, 300MHZ & SOT23 & MMBT3904 \\ \hline
S1 & LCD MODULE 16X2 CHARACTER & Pitch 2,54 & - \\ \hline
CONN1 & HEADER FEMALE 16POS.1" TIN & Through Hole & 16 pines \\ \hline
CONN2 & HEADER, 1ROW, 16WAY & T H Pitch 2,54 & 16 pines \\ \hline
LED1 & Led green 5mm & Through Hole & 1,9V,  2mA \\ \hline
LED2 & Led red 5mm & Through Hole & 1,9V,  2mA \\ \hline
LED3 & Led yellow 5mm & Through Hole & 2,4V,  2mA \\ \hline
BUZZ1 & Buzzer & Through Hole & 3~20Vdc, 3~16mA \\ \hline
\caption{Lista de componentes para la interfaz de usuario, LCD}
\label{}
\end{longtable}

\begin{figure}[H]
\centering
  \begin{center}
   \includegraphics[angle=90]{Imagenes/scui.jpg}
  \end{center}
  \caption{Esquemático de la placa SCUI}\label{Fig:SCUI} 
\end{figure}

\begin{figure}[H]
\centering
  \begin{center}
   \includegraphics[angle=90]{Imagenes/scui-lector_smart_card.jpg}
  \end{center}
  \caption{Esquemático del lector de tarjetas de contacto, incluido en la placa SCUI}\label{Fig:SAM} 
\end{figure}
%\newpage
\begin{figure}[H]
\centering
  \begin{center}
   \includegraphics[angle=90]{Imagenes/scui-interfaz_para_usuario.jpg}
  \end{center}
  \caption{Esquemático de la interfaz de usuario, incluido en la placa SCUI}\label{Fig:UI} 
\end{figure}


\subsection{Lector/Escritor RFID}
\begin{longtable}{|l|l|c|c|}
\hline
\multicolumn{1}{|c|}{\textbf{Componente}} & \multicolumn{1}{c|}{\textbf{Descripción}} & \textbf{ Footprint} & \textbf{Valor} \\ \hline
C1, C2 & Capacitor & 1608[0603] & 10pF,   Ceramic NPO, 2\% \\ \hline
C3, C4 & Capacitor & 1609[0603] & 100pF, Ceramic NPO, 2\% \\ \hline
C5, C6, C7, C8 & Capacitor & 1608[0603] &  NC \\ \hline
R1,  R2 & Resistor & 1608[0603] & 0W,  1/10W,  1\% \\ \hline
\caption{Lista de componentes de la antena RF, Inductor + Adaptación de impedancia}
\label{}
\end{longtable}

\begin{longtable}{|l|p{3cm}|c|c|}
\hline
\multicolumn{1}{|c|}{\textbf{Componente}} & \multicolumn{1}{c|}{\textbf{Descripción}} & \textbf{ Footprint} & \textbf{Valor} \\ \hline
C10 & Capacitor & 1610[0603] & 10pF, Ceramic NPO, 2\% \\ \hline
C1, C2 & Capacitor & 1608[0603] & 15pF, Ceramic NPO, 5\% \\ \hline
C12, C13 & Capacitor & 1608[0603] & 56pF, Ceramic NPO, 2\% \\ \hline
C14, C15 & Capacitor & 1608[0603] & 68pF, Ceramic NPO, 1\% \\ \hline
C9 & Capacitor & 1609[0603] & 100pF, Ceramic NPO,  2\% \\ \hline
C16 & Capacitor & 1608[0603] & 1nF, Ceramic NPO, 10\% \\ \hline
C4, C5, C7, C8, C11, C17 & Capacitor & 1608[0603] & 100nF, Ceramic X7R, 10\% \\ \hline
C3, C6, C18 & Capacitor & 1608[0603] & 10uF, Ceramic X5R, 20\% \\ \hline
L1, L2, L3, L6 & Inductor & 2012[0805] & 22nH, 700mA, 5\% \\ \hline
L4, L5 & Inductor & 3225[1210] & 1uH, 400mA, 5\% \\ \hline
R3 & Resistor & 1608[0603] & 50W, 1/10W   1\% \\ \hline
R2 & Resistor & 1608[0603] & 820W, 1/10W   5\% \\ \hline
R1 & Resistor & 1608[0603] & 2,2KW, 1/5W   1\% \\ \hline
U1 & Reader ISO14443 & SO32 & CL RC632 \\ \hline
U2 & Crystal Oscillator, HC49 US SMD & 49USMXL & 13.56MHz, 10pF \\ \hline
U3 & Operational Amplifier (up to 7.5V) & SOT23-5 & OPA354 \\ \hline
CONN1, CONN2 & U.FL-R Connector & U.FL-R-SMT & - \\ \hline
J1 & HEADER, 10WAY, 2ROW & T H Pitch 2,54 & 10 pines \\ \hline
J1b & RECEPTACLE, 10WAY, 2ROW & SMD  Pitch 2,54 & 10 pines \\ \hline
\caption{Lista de componentes del lector/escritor RFID, sin la antena RF}
\label{}
\end{longtable}

\begin{figure}[H]
\centering
  \begin{center}
  \includegraphics[angle=90]{Imagenes/rfid_rwd.jpg}
  \end{center}
  \caption{Esquemático del módulo digital del lector/escritor RFID}\label{Fig:RFID} 
\end{figure}

\begin{figure}[H]
\centering
  \begin{center}
  \includegraphics[angle=90]{Imagenes/rfid_coil.jpg}
  \end{center}
  \caption{Esquemático de la antena RFID, Inductor + Adaptación de impedancia}\label{Fig:RFID2} 
\end{figure}

